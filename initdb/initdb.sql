--
-- PostgreSQL database dump
--

-- Dumped from database version 17.3 (Debian 17.3-1.pgdg120+1)
-- Dumped by pg_dump version 17.3 (Debian 17.3-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: gender; Type: TYPE; Schema: public; Owner: -
--

CREATE TYPE public.gender AS ENUM (
    'FEMALE',
    'MALE',
    'OTHER'
);


--
-- Name: userstatus; Type: TYPE; Schema: public; Owner: -
--

CREATE TYPE public.userstatus AS ENUM (
    'ACTIVE',
    'INACTIVE',
    'NONE'
);


--
-- Name: usertype; Type: TYPE; Schema: public; Owner: -
--

CREATE TYPE public.usertype AS ENUM (
    'SYSADMIN',
    'USER'
);


--
-- Name: CAST (public.gender AS character varying); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (public.gender AS character varying) WITH INOUT AS IMPLICIT;


--
-- Name: CAST (public.userstatus AS character varying); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (public.userstatus AS character varying) WITH INOUT AS IMPLICIT;


--
-- Name: CAST (public.usertype AS character varying); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (public.usertype AS character varying) WITH INOUT AS IMPLICIT;


--
-- Name: CAST (character varying AS public.gender); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (character varying AS public.gender) WITH INOUT AS IMPLICIT;


--
-- Name: CAST (character varying AS public.userstatus); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (character varying AS public.userstatus) WITH INOUT AS IMPLICIT;


--
-- Name: CAST (character varying AS public.usertype); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (character varying AS public.usertype) WITH INOUT AS IMPLICIT;


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: tbl_group; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_group (
    id integer NOT NULL,
    role_id integer,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    description character varying(255),
    name character varying(255)
);


--
-- Name: tbl_group_has_user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_group_has_user (
    group_id integer,
    id integer NOT NULL,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    user_id bigint
);


--
-- Name: tbl_group_has_user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_group_has_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_group_has_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_group_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_permission; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_permission (
    id integer NOT NULL,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    category character varying(255),
    description character varying(255),
    path character varying(255)
);


--
-- Name: tbl_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_role; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_role (
    id integer NOT NULL,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    description character varying(255),
    name character varying(255)
);


--
-- Name: tbl_role_has_permission; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_role_has_permission (
    id integer NOT NULL,
    permission_id integer,
    role_id integer,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone
);


--
-- Name: tbl_role_has_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_role_has_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_role_has_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_role_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_role ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_role_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_user (
    dob date,
    created_at timestamp(6) without time zone,
    id bigint NOT NULL,
    updated_at timestamp(6) without time zone,
    phone character varying(15),
    address character varying(255),
    avatar character varying(255),
    email character varying(255),
    name character varying(255),
    password character varying(255),
    username character varying(255) NOT NULL,
    gender public.gender,
    status public.userstatus,
    type public.usertype
);


--
-- Name: tbl_user_has_role; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tbl_user_has_role (
    id integer NOT NULL,
    role_id integer,
    created_at timestamp(6) without time zone,
    updated_at timestamp(6) without time zone,
    user_id bigint
);

CREATE TABLE public.tbl_camera (
    facesluice VARCHAR(255) NOT NULL,
    time_basic timestamp,
    time_heartbeat timestamp,
    created_at timestamp(6) without time zone,
    PRIMARY KEY (facesluice)
);



--
-- Name: tbl_user_has_role_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_user_has_role ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_user_has_role_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: tbl_user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.tbl_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tbl_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: tbl_group; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_group (id, role_id, created_at, updated_at, description, name) FROM stdin;
\.


--
-- Data for Name: tbl_group_has_user; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_group_has_user (group_id, id, created_at, updated_at, user_id) FROM stdin;
\.


--
-- Data for Name: tbl_permission; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_permission (id, created_at, updated_at, category, description, path) FROM stdin;
1	\N	\N	/user	\N	/user/list
2	\N	\N	/user	\N	/user/{userId}
3	\N	\N	/user	\N	/user/add
4	\N	\N	/user	\N	/user/upd
5	\N	\N	/user	\N	/user/change-pwd
6	\N	\N	/user	\N	/user/confirm-email
7	\N	\N	/user	\N	/user/del
9	\N	\N	/user	\N	<null>
10	\N	\N	/user	\N	\N
11	\N	\N	/user	\N	\N
12	\N	\N	/user	\N	\N
13	\N	\N	/user	\N	\N
14	\N	\N	/user	\N	\N
15	\N	\N	/user	\N	\N
16	\N	\N	/user	\N	\N
17	\N	\N	/email	\N	/user/send-email
18	\N	\N	/email	\N	/user/send-verification-email
8	\N	\N	/user	\N	/user/change-status
\.


--
-- Data for Name: tbl_role; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_role (id, created_at, updated_at, description, name) FROM stdin;
1	\N	\N	\N	sysadmin
4	\N	\N	\N	busdriver
6	\N	\N	\N	assistant_driver
3	\N	\N	\N	teacher
5	\N	\N	\N	admin
2	\N	\N	\N	parent
\.


--
-- Data for Name: tbl_role_has_permission; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_role_has_permission (id, permission_id, role_id, created_at, updated_at) FROM stdin;
1	2	2	\N	\N
2	4	2	\N	\N
3	5	2	\N	\N
4	6	2	\N	\N
5	17	2	\N	\N
6	18	2	\N	\N
7	2	3	\N	\N
8	4	3	\N	\N
9	5	3	\N	\N
10	6	3	\N	\N
11	17	3	\N	\N
12	18	3	\N	\N
13	2	4	\N	\N
14	4	4	\N	\N
15	5	4	\N	\N
16	6	4	\N	\N
17	17	4	\N	\N
18	18	4	\N	\N
19	1	5	\N	\N
20	2	5	\N	\N
21	3	5	\N	\N
22	4	5	\N	\N
23	5	5	\N	\N
24	6	5	\N	\N
25	7	5	\N	\N
26	8	5	\N	\N
27	17	5	\N	\N
28	18	5	\N	\N
29	2	6	\N	\N
30	4	6	\N	\N
31	5	6	\N	\N
32	6	6	\N	\N
33	17	6	\N	\N
34	18	6	\N	\N
\.


--
-- Data for Name: tbl_user; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_user (dob, created_at, id, updated_at, phone, address, avatar, email, name, password, username, gender, status, type) FROM stdin;
2000-02-04	2025-02-15 16:11:19.907	1	2025-02-15 16:11:19.907	0912345671	72 An Dương	string	sysadmin@gmail.com	sysadmin	$2a$10$A0TsI6LQXRTz4sEMm/e3Xeknm03B2vvpbXIvEStrcySXXoPbqqULe	sysadmin	OTHER	ACTIVE	SYSADMIN
2000-02-04	2025-02-15 16:11:34.237	2	2025-02-15 16:11:34.237	0912345672	72 An Dương	string	parent@gmail.com	parent	$2a$10$F6UdD9COpdExAtPap4SD8.J7flrWEBQG68437TUTDoC.6E/uYNMju	parent	FEMALE	ACTIVE	USER
2000-02-04	2025-02-15 16:12:04.71	4	2025-02-15 16:12:04.71	0912345674	72 An Dương	string	busdriver@gmail.com	busdriver	$2a$10$tItfoi1dzxgscgUb4yzQ0.kTFwpzG0DHwMyaQEnMqUVHT5mc6UuNy	busdriver	MALE	ACTIVE	USER
2000-02-04	2025-02-15 16:12:41.14	6	2025-02-16 21:55:02.933	0912345676	72 An Dương	string	assistantdriver@gmail.com	assistantdriver	$2a$10$oHOl1svYNE17uXm0DqI9EuVZrpBvSZMY9ncIIxInAMb91X6Oo.MVe	assistantdriver	MALE	ACTIVE	USER
2000-02-04	2025-02-15 16:11:46.89	3	2025-02-16 21:57:08.854	0912345673	72 An Dương	string	teacher@gmail.com	teacher	$2a$10$qp5dTiun.m1SMNjZSHoBUutm2tumkW9d63QEfZgYkcJXW9BG/naG.	teacher	MALE	ACTIVE	USER
2025-02-16	2025-02-16 18:55:31.296	8	2025-02-16 18:55:31.297	0912345678	72 An Dương	string	parent1@gmail.com	parent1	$2a$10$zwFhfJhfhiXweLUHr6JATu37bC8qurLaERjVv5HtK4JMPIH/P25AW	parent1	MALE	ACTIVE	USER
2025-02-16	2025-02-16 18:50:47.038	7	2025-02-16 18:50:47.038	0912345677	72 An Dương	string	parent111@gmail.com	parent111	$2a$10$Zy8NnfgH5VBJZRB3voInm.t0AC0gp1bVA2AamSZg/Zr6RqXhp1.Iu	parent111	MALE	ACTIVE	USER
2000-02-04	2025-02-15 16:12:17.696	5	2025-02-15 16:12:17.696	0912345675	72 An Dương	string	admin@gmail.com	admin	$2a$10$haY87NZT4E5bBwE75BoyT.kSdLnlRLNxjDHNwm6KErBxpWrbaythu	admin	MALE	ACTIVE	USER
\.


--
-- Data for Name: tbl_user_has_role; Type: TABLE DATA; Schema: public; Owner: -
--

COPY public.tbl_user_has_role (id, role_id, created_at, updated_at, user_id) FROM stdin;
1	1	\N	\N	1
2	2	\N	\N	2
3	3	\N	\N	3
4	4	\N	\N	4
5	5	\N	\N	5
6	6	\N	\N	6
8	2	2025-02-16 18:50:47.043	2025-02-16 18:50:47.043	7
9	2	2025-02-16 18:55:31.336	2025-02-16 18:55:31.336	8
\.


--
-- Name: tbl_group_has_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_group_has_user_id_seq', 1, false);


--
-- Name: tbl_group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_group_id_seq', 1, false);


--
-- Name: tbl_permission_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_permission_id_seq', 19, false);


--
-- Name: tbl_role_has_permission_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_role_has_permission_id_seq', 35, false);


--
-- Name: tbl_role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_role_id_seq', 7, false);


--
-- Name: tbl_user_has_role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_user_has_role_id_seq', 9, true);


--
-- Name: tbl_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: -
--

SELECT pg_catalog.setval('public.tbl_user_id_seq', 8, true);


--
-- Name: tbl_group_has_user tbl_group_has_user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group_has_user
    ADD CONSTRAINT tbl_group_has_user_pkey PRIMARY KEY (id);


--
-- Name: tbl_group tbl_group_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group
    ADD CONSTRAINT tbl_group_pkey PRIMARY KEY (id);


--
-- Name: tbl_group tbl_group_role_id_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group
    ADD CONSTRAINT tbl_group_role_id_key UNIQUE (role_id);


--
-- Name: tbl_permission tbl_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_permission
    ADD CONSTRAINT tbl_permission_pkey PRIMARY KEY (id);


--
-- Name: tbl_role_has_permission tbl_role_has_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_role_has_permission
    ADD CONSTRAINT tbl_role_has_permission_pkey PRIMARY KEY (id);


--
-- Name: tbl_role tbl_role_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_role
    ADD CONSTRAINT tbl_role_pkey PRIMARY KEY (id);


--
-- Name: tbl_user_has_role tbl_user_has_role_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_user_has_role
    ADD CONSTRAINT tbl_user_has_role_pkey PRIMARY KEY (id);


--
-- Name: tbl_user tbl_user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_user
    ADD CONSTRAINT tbl_user_pkey PRIMARY KEY (id);


--
-- Name: tbl_user tbl_user_username_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_user
    ADD CONSTRAINT tbl_user_username_key UNIQUE (username);


--
-- Name: tbl_role_has_permission fk7qnieb63nch1w822p22wu7il9; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_role_has_permission
    ADD CONSTRAINT fk7qnieb63nch1w822p22wu7il9 FOREIGN KEY (role_id) REFERENCES public.tbl_role(id);


--
-- Name: tbl_group fke17sm3r6jxwtd4dsbummwt6y0; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group
    ADD CONSTRAINT fke17sm3r6jxwtd4dsbummwt6y0 FOREIGN KEY (role_id) REFERENCES public.tbl_role(id);


--
-- Name: tbl_role_has_permission fkimpu2q9vas7utdl3gti0w2ied; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_role_has_permission
    ADD CONSTRAINT fkimpu2q9vas7utdl3gti0w2ied FOREIGN KEY (permission_id) REFERENCES public.tbl_permission(id);


--
-- Name: tbl_group_has_user fkk23xt6t0rhoc1s185sekeayf9; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group_has_user
    ADD CONSTRAINT fkk23xt6t0rhoc1s185sekeayf9 FOREIGN KEY (group_id) REFERENCES public.tbl_group(id);


--
-- Name: tbl_user_has_role fklndw06guu8xedftiuosbtbr0a; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_user_has_role
    ADD CONSTRAINT fklndw06guu8xedftiuosbtbr0a FOREIGN KEY (user_id) REFERENCES public.tbl_user(id);


--
-- Name: tbl_user_has_role fknbcb2rhv9gavk1vtounetntw0; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_user_has_role
    ADD CONSTRAINT fknbcb2rhv9gavk1vtounetntw0 FOREIGN KEY (role_id) REFERENCES public.tbl_role(id);


--
-- Name: tbl_group_has_user fkqpbvdln7wyp9dnjvrx0mrrnk1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tbl_group_has_user
    ADD CONSTRAINT fkqpbvdln7wyp9dnjvrx0mrrnk1 FOREIGN KEY (user_id) REFERENCES public.tbl_user(id);


--
-- PostgreSQL database dump complete
--

